### ðŸ‘®â€â™‚ï¸ Langkah Selanjutnya: "Upacara Peresmian"

Setelah file ini Anda buat, tugas pertama Anda untuk **Si Anti (Tier 2/Thinking)** adalah ini:

> "Saya baru saja membuat `BLUEPRINT_V2.md`. Baca file tersebut.
> Mulai sekarang, struktur folder kita HARUS mengikuti aturan 'The SIP Galaxy' di dokumen itu.
>
> Tugas Pertamamu:
> Refactor folder `sip/client/src/components` yang berantakan, pindahkan komponen umum (Button, Input, dll) ke `sip/client/src/modules/core/components`.
> Jangan ubah logika, cuma pindah rumah saja."

Selamat membangun "Corelink SIP", Mentee! Langit bukan lagi batasnya! ðŸš€ðŸŒŒ

==============================================================================================================


saya mau "Corelink SIP" ini seperti yang kita bicarakan adalah bangunan Utama yang sudah menyiapkan untuk penghuni Role Codes:
00:SUPER_ADMIN, 01:PERPANI, 02:CLUB, 03:SCHOOL, 04:ATHLETE,05:PARENT, 06:COACH, 07:JUDGE, 08:EO, 09:SUPPLIER
10:MANPOWER (ini untuk penghuni yang tidak mempunyai role diatas sebagai support/punya akses dengan coreId )

Tujuannya corelink adalah penghubung antar role tersebut jadi hanya profile Details.
dengan flow: 
newuser: Onboarding > select role > signup > welcome > Profile Details
existing : Onboarding > Login

signup data (saat ini):
- Full Name (sesuai KK/KTP)
- Email
- Password
- Province-City
- WhatsApp
IRL(in real life)sekarang ini email Jarang dibaca, lebih Utama mengunakan WhatsApp.
saya berencana verifikasi mengunakan WhatsApp yang dikirim oleh system


Profile Details (Organization Role: Perpani, Club, School, Supplier, EO)
- Upload Avatar (profile Pict)
- Organization Logo
- Organization Name
- Organization Description
- Organization Address
- Organization WhatsApp (hotline)
- Organization Instagram
- Organization website
Stucture Organization
- Organization Manpower (CRUD : Position, Name, WhatsApp)
Branch
- Organization Unit (CRUD : Unit Name, Description, Province-City)
Documents
- File Manager 

Profile Details (Individu Role: Athlete, Parent, Coach, Judge)
- Upload Avatar (profile Pict)
- Date of Birth
- Gender
- NIK(Nomor Induk Kependudukan)
- Integration Status: (tergantung dengan role dipilih diawal) 
-- Club > search > Proposed > status (Verified, Pending,..)
-- School > search > Proposed > status (Verified, Pending,..)
-- Perpani > search > Proposed > status (Verified, Pending,..)
-- Athlete > search > Proposed > status (Verified, Pending,..)
catatan: bisa terjadi integrasi lebih dari 1 organisasi, contoh:
Athlete: Club > Perpani
Parent : Athlete > Club
Coach : Club (nah terkadang ada coach yang mengajar lebih dari 1 club)
Judge : Perpani



==============================================================================================================


sip/
â”œâ”€â”€ .clinerules            <-- (WAJIB) Hukum Tertinggi. Si Anti baca ini tiap kali mulai.
â”œâ”€â”€ BLUEPRINT_V2.md        <-- (WAJIB) Kitab Undang-Undang / Peta Arsitektur.
â”œâ”€â”€ PromptSteps.txt        <-- (WAJIB) Skenario / Naskah Drama untuk migrasi ini.
â”œâ”€â”€ README.md              <-- Pintu Masuk Manusia (Update ringkas arahkan ke Blueprint).
â”‚
â”œâ”€â”€ .agents/               <-- (BARU) Lemari Baju / Persona
â”‚   â”œâ”€â”€ architect.md       <-- Topi Arsitek
â”‚   â”œâ”€â”€ backend.md         <-- Topi Backend
â”‚   â””â”€â”€ frontend.md        <-- Topi Frontend
â”‚
â”œâ”€â”€ memory-bank/           <-- (BARU) Otak Jangka Panjang (Folder, bukan file)
â”‚   â”œâ”€â”€ productContext.md  <-- Visi Corelink SIP
â”‚   â”œâ”€â”€ activeContext.md   <-- Apa yang sedang dikerjakan sekarang
â”‚   â””â”€â”€ systemPatterns.md  <-- Pola code (React + Express Mirroring)
â”‚
â”œâ”€â”€ docs/                  <-- (RAPIGEN) Pindahkan catatan lama ke sini
â”‚   â”œâ”€â”€ troubleshooting.md <-- Log error lama
â”‚   â””â”€â”€ legacy_notes.md    <-- Catatan lama lain
â”‚
â”œâ”€â”€ client/                <-- Project Frontend
â”œâ”€â”€ server/                <-- Project Backend
â””â”€â”€ package.json           <-- Root config

==============================================================================================================

# ðŸš€ MASTER PLAN: SIP MIGRATION TO MODULAR GALAXY

## STEP 0: PERSIAPAN MENTAL & TOOLS âœ… [DONE]
**Tujuan:** Memastikan Agent punya "otak" dan aturan yang benar sebelum menyentuh kode.
**Pelaksana:** User (Manual)
**Action:**
1. Pastikan file `BLUEPRINT_V2.md` sudah ada di root folder.
2. Pastikan file `.clinerules` sudah ada di root folder.
3. Pastikan folder `.agents/` berisi `backend.md`, `frontend.md`, `architect.md`.
4. Buat branch git baru: `git checkout -b refactor/modular-migration`.

---

## STEP 1: SAFEGUARD & LEGACY FREEZE âœ… [DONE]
**Tujuan:** Mengamankan kode lama agar tidak tercampur, dan menyiapkan lahan kosong untuk struktur baru.
**Pelaksana:** @agent-architect (Tier 2/Thinking)
**Prompt:**
"Aktifkan mode @agent-architect.
Kita akan memulai migrasi besar. Lakukan hal berikut:
1. Rename folder `sip/client/src` menjadi `sip/client/_src_legacy`.
2. Rename folder `sip/server/src` menjadi `sip/server/_src_legacy`.
3. Buat folder kosong baru: `sip/client/src` dan `sip/server/src`.
4. Buat struktur folder modular di `sip/client/src` sesuai `BLUEPRINT_V2.md` (buat folder `modules/core`, `modules/athlete`, `modules/club`, `modules/event`).
Jangan pindahkan file apapun dulu. Cukup siapkan strukturnya."

---

## STEP 2: CORE FOUNDATION (THE SKELETON) âœ… [DONE]
**Tujuan:** Membuat aplikasi bisa berjalan (booting) minimal menampilkan halaman kosong/login, tanpa fitur bisnis.
**Pelaksana:** @agent-frontend (Tier 2/Thinking)
**Prompt:**
"Aktifkan mode @agent-frontend.
Tugasmu adalah membuat `sip/client` bisa berjalan (`npm run dev`) dengan struktur baru.
1. **Copy Config Vital:**
   Copy file konfigurasi (`main.tsx`, `App.tsx`, `index.css`, `vite-env.d.ts`) dari `_src_legacy` ke `src`.
2. **Migrasi Komponen UI (DENGAN SANITASI):**
   Pindahkan komponen UI dasar (Button, Input, Sidebar, Navbar, Shadcn UI) dari `_src_legacy/components` ke `src/modules/core/components`.
   **CRITICAL:** Cek setiap file yang dipindah. Jika ada komponen Core yang meng-import sesuatu dari fitur (misal: `athlete`, `club`, atau `features`), **HAPUS import tersebut** atau ganti dengan dummy sementara. Core Module TIDAK BOLEH tergantung pada fitur lain.
3. **Migrasi Auth & Hooks:**
   Pindahkan Auth Context, Hooks (useAuth, dll), dan Layouts dari `_src_legacy` ke `src/modules/core`.
4. **Wiring Ulang:**
   Perbaiki import path di `App.tsx` dan `main.tsx` agar mengarah ke lokasi baru di `modules/core`. Comment dulu routing ke halaman Athlete/Club jika bikin error.
5. **Test Booting:**
   Pastikan aplikasi bisa menyala (`npm run dev`) tanpa error merah di terminal. Halaman mungkin terlihat kosong atau rusak, yang penting tidak *crash*."

---

## STEP 3: MIGRASI MODULE ATHLETE âœ… [DONE]
**Tujuan:** Memindahkan fitur spesifik Atlet ke "kamar" barunya.
**Pelaksana:** @agent-frontend (Tier 2/Thinking)
**Prompt:**
"Aktifkan mode @agent-frontend.
Fokus sekarang: MODULE ATHLETE.
1. Identifikasi file-file terkait Atlet (Dashboard, Scoring, Profile) di `_src_legacy`.
2. Pindahkan mereka ke `src/modules/athlete/pages` dan `src/modules/athlete/components`.
3. Update `App.tsx` untuk menambahkan routing ke halaman-halaman atlet ini.
4. Pastikan import path diperbaiki (jika butuh Button, import dari `modules/core`)."

---

## STEP 4: MIGRASI MODULE CLUB & EVENT âœ… [DONE]
**Tujuan:** Memindahkan sisa fitur bisnis lainnya.
**Pelaksana:** @agent-frontend (Tier 3/Fast)
**Prompt:**
"Aktifkan mode @agent-frontend.
Lakukan hal yang sama seperti Step 3, tapi untuk MODULE CLUB dan MODULE EVENT.
Pindahkan file dari `_src_legacy` ke `src/modules/club` dan `src/modules/event`.
Pastikan tidak ada file bisnis yang tertinggal di `_src_legacy` kecuali sampah yang tidak terpakai."

---

## STEP 5: BACKEND ALIGNMENT âœ… [DONE]
**Tujuan:** Menyesuaikan folder backend agar strukturnya mencerminkan frontend (Mirroring).
**Pelaksana:** @agent-backend (Tier 2/Thinking)
**Prompt:**
"Aktifkan mode @agent-backend.
Kita rapihkan sisi server.
1. Pindahkan file logic (controllers/services) dari `sip/server/_src_legacy` ke `sip/server/src/modules/` sesuai domainnya (Athlete, Club, Core).
2. Update `index.ts` server agar routingnya tetap jalan normal.
Pastikan API endpoint tidak berubah agar Frontend tidak error."

---

## STEP 6: FINAL CLEANUP â³ [PARTIAL/PENDING]
**Tujuan:** Menghapus masa lalu dan meresmikan masa depan.
**Pelaksana:** @agent-manager (Tier 3/Fast)
**Prompt:**
"Cek apakah aplikasi berjalan normal di localhost.
Jika ya, hapus folder `_src_legacy` di client dan server.
Update `README.md` jika perlu.
Lakukan `git commit` final."

---

## STEP 7: AGENT INTERACTION PROTOCOL (C-A-R) ðŸš€ [NEW]
**Tujuan:** Memastikan Agent memahami tugas secara instan dengan presisi tinggi.
**Struktur Prompt:** Context-Action-Rule (C-A-R)

### Template Prompt:
> **"Gunakan persona @[Persona]. Saya ingin [Tujuan Utama] di module [Nama Module]. Rujuk ke [File Dokumen/Roadmap] dan pastikan mengikuti `/lint-protocol` di akhir pekerjaan."**

### Contoh Praktis:
1. **Backend Development:**
   "Gunakan persona @backend. Buat API endpoint untuk pengajuan lisensi pelatih di module `club/features/licensing`. Rujuk ke BLUEPRINT_V2.md. Jalankan `/lint-protocol` sebelum selesai."
   
2. **Frontend UI/UX:**
   "Gunakan persona @frontend. Perbaiki loading state di EventDashboardPage.tsx agar menggunakan Skeleton loader. Pastikan mengikuti standar UI Hexagon/Modern."

3. **Database Migration:**
   "Gunakan persona @database. Tambahkan field expiryDate pada tabel StudentEnrollment di Prisma schema. Lakukan migrasi dan update Prisma Client."

### Tips Efektivitas:
- **Panggil Persona:** Selalu mulai dengan `@persona` (architect, backend, frontend, database).
- **Spesifik Module:** Sebutkan module galaxy-nya (core, athlete, club, event).
- **Mandat Verifikasi:** Selalu sertakan instruksi menjalankan `/lint-protocol` untuk menjamin tidak ada regresi build."
